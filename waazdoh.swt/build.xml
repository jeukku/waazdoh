<project>
	<property name="projectname" value="waazdoh.swt" />
	<property name="staging.dir" value="target/staging" />

	<condition property="isWindows">
		<os family="windows" />
	</condition>

	<condition property="isLinux">
		<os family="unix" />
	</condition>

	<target name="swtt.check.uptodate">
		<uptodate property="swtt.notrequired" targetfile="target/build.trig">
			<srcfiles dir="src/" excludes="**/*.exe" />
			<srcfiles dir="./" includes="*.xml" excludes="target" />
			<srcfiles dir="./" includes="*.trig" excludes="target" />
		</uptodate>

	</target>

	<target name="if_windows" unless="swtt.notrequired" if="isWindows">
		<echo file="target/build.trig">Done</echo>
		<exec command="${mvn} -P launch4j install" failonerror="true" />
	</target>

	<target name="if_unix" unless="swtt.notrequired" if="isLinux">
		<echo file="target/build.trig">Done</echo>
		<exec command="${mvn} install" failonerror="true" />
	</target>

	<target name="deploy" depends="swtt.check.uptodate, if_windows, if_unix">
		<echo>Done</echo>
	</target>
</project>
